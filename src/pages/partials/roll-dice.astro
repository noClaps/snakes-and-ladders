---
import {
    p1position,
    p2position,
    p3position,
    p4position,
    turn,
} from "../../scripts/position";
import DiceValue from "../../components/game/DiceValue.astro";
import { roll } from "../../scripts/functions";

export const partial = true;

const [newPosition, rollDice] = roll(turn.get());

if (newPosition <= 100) {
    if (turn.get() === 1) {
        p1position.set(newPosition);
    }
    if (turn.get() === 2) {
        p2position.set(newPosition);
    }
    if (turn.get() === 3) {
        p3position.set(newPosition);
    }
    if (turn.get() === 4) {
        p4position.set(newPosition);
    }
}

if (turn.get() !== 4) {
    turn.set(turn.get() + 1);
} else {
    turn.set(1);
}
---

<DiceValue value={rollDice} />
